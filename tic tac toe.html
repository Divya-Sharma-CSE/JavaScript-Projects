<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe</title>

<!--STYLES-->
    <style>
        *{
            margin:0;
            padding:0;
        }
        body{
            gap:3rem;
            display: grid;
            grid-template-rows: repeat(1,1fr);
            justify-content: center;
            align-items: center;
            background-color: #0a0519;
            min-height: 100vh;
            color: beige;
        }

        .activePlayers{
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
            font-size: 2rem;
            gap:15px;
        }
        .container{
            display: grid;
            justify-content: center;
            align-items: center; 
            grid-template-columns: repeat(3,100px);

            gap:10px;
        }

        .box, .player {
            height: 100px;
            width:100px;
            font-size: 2.3rem;
            font-weight: bold;
            border-radius: 14px;
            opacity: 0.5;
            color: beige;
            align-items: center;
            justify-items: center;
            cursor: pointer;
        }


        .reset{
            padding: 7px;
            width: 7rem;
            font-size: 1rem;
            justify-self: center;
            margin-bottom: 3rem;
            border-radius: 5px;   
            color: beige;        
            cursor: pointer;
        }

        .reset, .box, .player{
            background-color: #17122a;
            border: solid 4px #261f41;
        }

        .player{
            opacity: 1;
            border: solid 4px #362f50;
        }
        .xActive{
            color: #1892ea;
        }

        .oActive{
            color: #a737ff;
        }

        .box:hover{
            border: solid 4px #3a315d;
        }

        .banner {
    position: fixed;
    /* important trio */
    top: 50%;                               
    left: 50%;
    transform: translate(-50%, -50%);
    height: 150px;
    width: 500px;
    z-index: 100;
    background: linear-gradient(to right,#271539,#501f5a,#915ba4);
    box-shadow: solid 0 8px 8px #0a0519;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    font-size: 1.5rem;
    color: beige;
    border-radius: 15px;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.4s ease;
}

/*
        .banner{
            height: 150px;
            width:500px;
            z-index: 100;
            background:linear-gradient(to right, #271539,#501f5a,#915ba4, #974e79);
            visibility: hidden;
            opacity: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 10px;
            font-size: 2rem;
            top:50%;
            transform: translateY(-50%);
            transition: opacity ease 0.2s;
        }
*/
    </style>

</head>
<body>
    <h1 class="heading" style="justify-self: center;">Tic Tac Toe</h1>
    <div class='activePlayers'>
        <button id="xIndic" class="player xActive">X</button>
        <h3>Player Active</h3>
        <button id="oIndic" class="player">O</button>
    </div>
    <div class="container">
        <button class="box"></button>
        <button class="box"></button>
        <button class="box"></button>
        <button class="box"></button>
        <button class="box"></button>
        <button class="box"></button>
        <button class="box"></button>
        <button class="box"></button>
        <button class="box"></button>
    </div>
    <button class="reset">Reset</button>
    <div class="banner">
    </div>


<!--SCRIPT-->
    <script>
    //Alternate Indicator
    //Winner
    //Main


        //Alternate Indicator
        let currentPlayer= 'X';
        let xIndic = document.getElementById('xIndic');
        let oIndic = document.getElementById('oIndic');

        function updateActive(){
            if (currentPlayer === 'X'){
                xIndic.classList.add('xActive');
                oIndic.classList.remove('oActive');
            }else{
                xIndic.classList.remove('xActive');
                oIndic.classList.add('oActive');
            }
        }

        //Winner
        function checkWinner(){
            for (let pattern of winningP){
                // pattern[1] gives me index (here, 1). boxes[pattern[1]] returns the box at index 1. boxes.[pattern[1]].innerText
                // returns the values inside the box at index 1
                let pos1val = boxes[pattern[0]].innerText;
                let pos2val = boxes[pattern[1]].innerText;
                let pos3val = boxes[pattern[2]].innerText;

                if (pos1val != "" && pos2val != "" && pos3val != ""){
                    if (pos1val === pos2val && pos2val === pos3val){
                        boxes[pattern[0]].classList.add('player');
                        boxes[pattern[1]].classList.add('player');
                        boxes[pattern[2]].classList.add('player');

                        winnerBanner.innerHTML = `<h2>Congratulations!<br>${pos1val} has won</h2>`;
                        winnerBanner.style.visibility = 'visible';
                        winnerBanner.style.opacity = 1;


                    }
                }
            }
        }

        //Main
        let boxes = document.querySelectorAll('.box');
        let reset = document.querySelector('.reset');
        let body = document.querySelector('body');
        let winnerBanner = document.querySelector('.banner');
        //Do not use <getElementsByClassName> because it returns a collection of elements (a list)
            //  rather than one element


        const winningP =  [
            [0,1,2], 
            [3,4,5],
            [6,7,8],
            [0,3,6],
            [1,4,7],
            [2,5,8],
            [0,4,8],
            [2,4,6]
        ];

        boxes.forEach((box) =>{
            box.addEventListener('click',()=>{
                box.innerText = currentPlayer;
                currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
                updateActive();
                box.disabled = true;         //Important !!
                checkWinner();
                restart();
            })
        });

        reset.addEventListener('click', ()=>{
            boxes.forEach((box) => {
                box.innerText ="";
                box.classList.remove('player');
                box.disabled = false;
            });
            winnerBanner.style.visibility = 'hidden';
            winnerBanner.style.opacity = 0;
        });





    </script>

</body>
</html>